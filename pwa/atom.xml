<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US">
  <id>https://vuepress-theme-hope.github.io/v2/pwa/</id>
  <title/>
  <updated>2022-01-27T15:29:51.449Z</updated>
  <generator>vuepress-plugin-feed2</generator>
  <link rel="self" href="https://vuepress-theme-hope.github.io/v2/pwa/atom.xml"/>
  <link rel="alternate" href="https://vuepress-theme-hope.github.io/v2/pwa/"/>
  <entry>
    <title type="html">Home</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/"/>
    <updated>2022-01-27T15:31:19.978Z</updated>
    <content type="html"><![CDATA[<p>This plugin will turn on Progressive Web App Support.</p>
<h2 id="how-to-use" tabindex="-1"> How to use</h2>
<h3 id="install" tabindex="-1"> Install</h3>
<CodeGroup>
<CodeGroupItem title="yarn">
<div><pre><code><span>yarn</span> <span>add</span> -D vuepress-plugin-pwa2@next
</code></pre><div><span>1</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="npm">
<div><pre><code><span>npm</span> i -D vuepress-plugin-pwa2@next
</code></pre><div><span>1</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h3 id="usage" tabindex="-1"> Usage</h3>
<CodeGroup>
<CodeGroupItem title="ts">
<div><pre><code><span>// .vuepress/config.ts</span>
<span>import</span> <span>{</span> pwa <span>}</span> <span>from</span> <span>"vuepress-plugin-pwa2"</span><span>;</span>

<span>export</span> <span>default</span> <span>{</span>
  plugins<span>:</span> <span>[</span>
    <span>pwa</span><span>(</span><span>{</span>
      <span>// your options</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="js">
<div><pre><code><span>// .vuepress/config.js</span>
<span>const</span> <span>{</span> pwa <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vuepress-plugin-pwa2"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>pwa</span><span>(</span><span>{</span>
      <span>// your options</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div></CodeGroupItem>
</CodeGroup>
]]></content>
  </entry>
  <entry>
    <title type="html">Config</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/config.html</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/config.html"/>
    <updated>2022-01-27T15:31:19.981Z</updated>
    <content type="html"><![CDATA[<h2 id="showinstall" tabindex="-1"> showInstall</h2>
<ul>
<li>Type: <code>boolean</code></li>
<li>Default: <code>true</code></li>
</ul>
<p>Whether display install button when Service Worker is first registered successfully.</p>
<h2 id="manifest" tabindex="-1"> manifest</h2>
<ul>
<li>Type: <code>ManifestOption</code></li>
<li>Required: No</li>
</ul>
<p>You can fill with an object which will be parsed to manifest.webmanifest.</p>
<div><p>Tips</p>
<p>Some options have their fallback if you donot set them.</p>
<ul>
<li>
<p>name: <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></p>
</li>
<li>
<p>short_name: <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></p>
</li>
<li>
<p>description: <code>siteConfig.description</code> || <code>themeConfig.description</code> || <code>'A site built with vuepress-theme-hope'</code></p>
</li>
<li>
<p>lang: <code>siteConfig.locales['/'].lang</code> || <code>themeConfig.locales['/'].lang</code> || <code>&quot;en-US&quot;</code></p>
</li>
<li>
<p>start_url: <code>context.base</code></p>
</li>
<li>
<p>scope: <code>context.base</code></p>
</li>
<li>
<p>display: <code>&quot;standalone&quot;</code></p>
</li>
<li>
<p>theme_color: <code>&quot;#46bd87&quot;</code></p>
</li>
<li>
<p>background_color: <code>'#ffffff'</code></p>
</li>
<li>
<p>orientation: <code>'portrait-primary'</code></p>
</li>
<li>
<p>prefer_related_applications: <code>false</code></p>
</li>
</ul>
</div>
<div><p>More</p>
<p>For docs of Manifest, please see <a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest</a></p>
</div>
<h2 id="favicon" tabindex="-1"> favicon</h2>
<ul>
<li>Type: <code>string</code></li>
<li>Required: No</li>
</ul>
<p>Path of favico.ico with absolute path.</p>
<div><p>Note</p>
<p>We recommand you to set favicon for your site</p>
</div>
<h2 id="themecolor" tabindex="-1"> themeColor</h2>
<ul>
<li>类型: <code>string</code></li>
<li>默认值: <code>&quot;#46bd87&quot;</code></li>
</ul>
<p>Theme Color, default is theme green</p>
<h2 id="maxsize" tabindex="-1"> maxSize</h2>
<ul>
<li>Type: <code>number</code></li>
<li>Default: <code>2048</code></li>
</ul>
<p>Max size which allows to cache, with KB unit</p>
<div><p>Note</p>
<p>This option has the highest priority, and any files exceeding this value will be excluded.</p>
<p>So if you generate very large HTML or JS files, please consider increasing this value, otherwise your PWA may not work normally in offline mode.</p>
</div>
<h2 id="cachehtml" tabindex="-1"> cacheHTML</h2>
<ul>
<li>Type: <code>boolean</code></li>
<li>Default: <code>true</code></li>
</ul>
<p>Whether cache HTML files besides home page and 404 page.</p>
<h2 id="cachepic" tabindex="-1"> cachePic</h2>
<ul>
<li>Type: <code>boolean</code></li>
<li>Default: <code>false</code></li>
</ul>
<p>Whether cache pictures</p>
<h2 id="maxpicsize" tabindex="-1"> maxPicSize</h2>
<ul>
<li>Type: <code>number</code></li>
<li>Default: <code>1024</code></li>
</ul>
<p>Max picture size which allows to cache, with KB unit</p>
<h2 id="apple" tabindex="-1"> apple</h2>
<p>Special settings for Apple</p>
<blockquote>
<p>If you don’t want to make detailed settings, you can safely ignore it; if you don’t want your site compatable with safari on apple, please set it to <code>false</code>.</p>
</blockquote>
<h3 id="apple-icon" tabindex="-1"> apple.icon</h3>
<ul>
<li>Type: <code>string</code></li>
<li>Required: No</li>
</ul>
<p>Fill in the icon address used by Apple, the recommended size is 152×152</p>
<h3 id="apple-statusbarcolor" tabindex="-1"> apple.statusBarColor</h3>
<ul>
<li>Type: <code>&quot;black&quot; | &quot;white&quot;</code></li>
<li>Default: <code>&quot;black&quot;</code></li>
</ul>
<p>Apple’s status bar color</p>
<h3 id="apple-maskicon" tabindex="-1"> apple.maskIcon</h3>
<ul>
<li>Type: <code>string</code></li>
<li>Required: No</li>
</ul>
<p>Safari mask icon</p>
<h2 id="mstile" tabindex="-1"> msTile</h2>
<p>Special settings for Microsoft tiles</p>
<blockquote>
<p>If you don’t want to make detailed settings, you can safely ignore it; if you don’t want your site compatable with windows, please set it to <code>false</code>.</p>
</blockquote>
<h3 id="mstile-image" tabindex="-1"> msTile.image</h3>
<ul>
<li>Type: <code>string</code></li>
<li>Required: No</li>
</ul>
<p>Tile icon</p>
<h3 id="mstile-color" tabindex="-1"> msTile.color</h3>
<ul>
<li>Type: <code>string</code></li>
<li>Default value: <code>themeColor</code></li>
</ul>
<p>The tile color will automatically fall back to themeColor if you don’t set it.</p>
<h2 id="popupcomponent" tabindex="-1"> popupComponent</h2>
<ul>
<li>Type: <code>string</code></li>
<li>Default: <code>'SWUpdatePopup'</code></li>
</ul>
<p>You can fill in the custom pop-up component path.</p>
<h2 id="generateswconfig" tabindex="-1"> generateSwConfig</h2>
<p>Options passed to <code>workbox-build</code>, for details, see <a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW" target="_blank" rel="noopener noreferrer">Workbox documentation</a></p>
<h2 id="locales" tabindex="-1"> locales</h2>
<div><pre><code><span>interface</span> <span>PWALocaleData</span> <span>{</span>
  <span>/**
   * Install button text
   */</span>
  install<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * iOS install hint text
   */</span>
  iOSInstall<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Cancel button text
   */</span>
  cancel<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Close button text
   */</span>
  close<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Previous image text
   */</span>
  prevImage<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Next image text
   */</span>
  nextImage<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Install explain text
   */</span>
  explain<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Description label text
   */</span>
  desc<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Feature label text
   */</span>
  feature<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * Update label text
   */</span>
  update<span>:</span> <span>string</span><span>;</span>
<span>}</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br></div></div><p>Locales config.</p>
]]></content>
  </entry>
  <entry>
    <title type="html">Guide</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/guide.html</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/guide.html"/>
    <updated>2022-01-27T15:31:19.985Z</updated>
    <summary type="html"><![CDATA[<p>The plugin brings enhanced PWA support to VuePress [^pwa-intro].</p>
]]></summary>
    <content type="html"><![CDATA[<p>The plugin brings enhanced PWA support to VuePress <sup></sup>.</p>

<h2 id="content-caching-and-updating" tabindex="-1"> Content caching and updating</h2>
<p>Service Worker <sup></sup> (SW for short) is mainly used to cache and proxy site content.</p>
<p>This plugin will automatically register Service Woker through <code>workbox-build</code>.</p>
<p>To better control what the Service Worker can pre-cache, the plugin provides the following configurations.</p>
<p>If you are an advanced user, you can also directly set <code>generateSwConfig</code> to pass options to <code>workbox-build</code>.</p>
<h3 id="default-cache" tabindex="-1"> Default cache</h3>
<p>By default, the plugin will pre-cache all files related to the site: <code>**/*.{html,js,css,svg}</code></p>
<p>At the same time, the plugin will cache font files: <code>**/*.{woff,woff2,eot,ttf,otf}</code>.</p>
<h3 id="cache-control" tabindex="-1"> Cache Control</h3>
<p>Based on the requirement of installable <sup></sup>, the plugin provides related options for cache control.</p>
<h4 id="picture-cache" tabindex="-1"> Picture Cache</h4>
<p>You can cache site pictures by setting the <code>cachePic</code> option to <code>true</code>.</p>
<p>If your site is not large and the pictures are mostly critical descriptions, and hope to be displayed in offline mode, please set this option to <code>true</code>.</p>
<div><p>Image recognition</p>
<p>We recognize images by file extension. Any files ending with <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, <code>.gif</code>, <code>.bmp</code>, <code>.webp</code> will be regarded as images.</p>
</div>
<h4 id="html-cache" tabindex="-1"> HTML cache</h4>
<p>When your site is too large, you can set <code>cacheHTML</code> to <code>false</code> to cache only the homepage and 404 error pages.</p>
<div><p>Why can these be removed?</p>
<p>Though VuePress generates HTML files through SSR<sup></sup> for all pages, these files are mainly used for SEO<sup></sup> and allow you to directly configure the backend without SPA<sup></sup> Visit any link.</p>
<p>VuePress is essentially a SPA. This means that you can enter from the homepage to access all pages normally only caching the homepage.</p>
<p>When your site has a large number of pages or content, and the volume is too large after including HTML files, you can consider setting this option to <code>false</code>, which can reduce the volume by about 40%. The disadvantage is that users can only enter through the homepage and then navigate to the corresponding page in an offline environment. Direct access to a link will prompt a web page error.</p>
</div>
<h4 id="size-control" tabindex="-1"> Size control</h4>
<p>To prevent large files from being included in the pre-cache list, any files larger than 2MB or pictures larger than 1MB will be deleted.</p>
<p>You can customize the maximum file size of the cache (unit: KB) with the <code>maxSize</code> option, or change the size limit of the picture (unit: KB) with <code>maxPicSize</code>.</p>
<h3 id="update-popup" tabindex="-1"> Update popup</h3>
<p>We provide an update popup when new content is successfully downloaded.</p>
<div><p>Custom popup</p>
<p>If you are not satisfied with the default popup component, you can write component and replace it by yourself. To do that, You need to register your popup component globally and pass the name of the component to the <code>popupComponent</code> option.</p>
</div>
<h2 id="manifest-file-generation" tabindex="-1"> Manifest file generation</h2>
<p>To ensure the installability of PWA, the site needs to generate a manifest file and declare a valid manifest file address <sup></sup> through <code>link</code>.</p>
<p>The plugin will automatically generate the Manifest file <code>manifest.webmanifest</code> for you in the output directory, and will also add the manifest address statement to each HTML <code>&lt;head&gt;</code>.</p>
<p>If you already have a <code>manifest.webmanifest</code> or <code>manifest.json</code> in <code>.vuepress/public</code>, the plugin will read and merge it into the final manifest.</p>
<h3 id="automatic-generation" tabindex="-1"> Automatic generation</h3>
<p>The plugin will use the information from the VuePress plugin API and set the fallback for fields in manifest as much as possible. So you don’t need to set most of the manifest fields.</p>
<p>If the following fields are not set, they will try to fallback to the following preset values in order.</p>
<table>
<thead>
<tr>
<th>Options</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></td>
</tr>
<tr>
<td>short_name</td>
<td><code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></td>
</tr>
<tr>
<td>description</td>
<td><code>siteConfig.description</code> || <code>themeConfig.description</code> || <code>'A site built with vuepress-theme-hope'</code></td>
</tr>
<tr>
<td>lang</td>
<td><code>siteConfig.locales['/'].lang</code> || <code>themeConfig.locales['/'].lang</code> || <code>&quot;en-US&quot;</code></td>
</tr>
<tr>
<td>start_url</td>
<td><code>context.base</code></td>
</tr>
<tr>
<td>scope</td>
<td><code>context.base</code></td>
</tr>
<tr>
<td>display</td>
<td><code>&quot;standalone&quot;</code></td>
</tr>
<tr>
<td>theme_color</td>
<td><code>&quot;#46bd87&quot;</code></td>
</tr>
<tr>
<td>background_color</td>
<td><code>'#ffffff'</code></td>
</tr>
<tr>
<td>orientation</td>
<td><code>'portrait-primary'</code></td>
</tr>
<tr>
<td>prefer_related_applications</td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<p>For complete configuration items, please see <a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/blob/v1/packages/pwa/src/types/manifest.d.ts" target="_blank" rel="noopener noreferrer">Manifest Type Definition File</a></p>
<h3 id="manual-configuration" tabindex="-1"> Manual configuration</h3>
<p>You can manually specify the contents of the manifest in the <code>manifest</code> option.</p>
<div><p>Priority</p>
<p><code>manifest</code> option has the highest priority, followed by manifest files that may exist in the <code>public</code> folder.</p>
</div>
<p><strong>You should at least set a valid icon through <code>manifest.icons</code> or other icon related options in the PWA plugin.</strong></p>
<div><p>Note</p>
<p>The installability <sup></sup> specification requires at least one valid icon to be declared in the manifest.</p>
<p>So if you do not configure <code>manifest.icons</code>, visitors can only enjoy the offline accessibility brought by the Service Worker cache, while cannot install your site as a PWA.</p>
<p>Besides the plugin does not process anything in the manifest, but outputs them as-is. This means that if you plan to deploy to a subdirectory, you should add <code>base</code> to the corresponding URL in the manifest yourself.</p>
</div>
<h2 id="other-options" tabindex="-1"> Other options</h2>
<p>The plugin also provides other PWA-related options, such as Microsoft tile icon and color settings, Apple icon and so on.</p>
<p>You can set them as needed. For detailed options, please see <a href="/config.html">Configuration Page</a>.</p>
<h2 id="further-reading" tabindex="-1"> Further Reading</h2>
<p>For more details, please see:</p>
<ul>
<li><a href="https://web.dev/progressive-web-apps/" target="_blank" rel="noopener noreferrer">Google PWA</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">MDN PWA</a></li>
<li><a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest Specification</a></li>
</ul>
<hr>
<section>
<ol>
<li id="footnote1"><p><strong>PWA introduction</strong></p>
<p>PWA, full name Progressive Web app. PWA standard is stipulated by W3C.</p>
<p>It allows sites to install the site as an App on supported platform through a browser that supports this feature. </p>
</li>
<li id="footnote2"><p><strong>Service Worker Introduction</strong></p>
<ol>
<li>
<p>The Service Worker will get and cache all the files registered in it during the registration process.</p>
</li>
<li>
<p>After the registration complete, the Service Worker is activated, and starts to proxy and control all your requests.</p>
</li>
<li>
<p>Whenever you want to initiate an access request through the browser, the Service Worker will check whether it exists in its own cache list, if it exists, it will directly return the cached result, otherwise it will call its own fetch method to get it. You can use a custom fetch method to fully control the result of the request for resources in the web page, such as providing a fallback web page when offline.</p>
</li>
<li>
<p>Every time the user reopens the site, the Service Worker will request to the link when it was registered. If a new version of Service Woker is detected, it will update itself and start caching the list of resources registered in the new Service Worker . After the content update is successfully obtained, the Service Worker will trigger the <code>update</code> event. The user can be notified through this event, for example, a pop-up window will be displayed in the lower right corner, prompting the user that new content is available and allowing the user to trigger an update.</p>
</li>
</ol>
 </li>
<li id="footnote3"><p><strong>Installable</strong></p>
<p>To let the site be registered as a PWA, the site needs to successfully register a valid service worker by itself, and at the same time add a valid manifest file and declare it.</p>
<p>Each platform or browser has requirements for the size of the Service Worker cache. When the file size of the Service Worker cache is too large, the site will be marked as not installable. For Safari, the threshold is 50 MB, a few browsers will set less or more values (30MB, 70MB, 80MB), and Chrome will mark the threshold at 100 MB.</p>
<p>The manifest file should contain at least <code>name</code> (or <code>short_name</code>) <code>icons</code> <code>start_url</code></p>
<p>And starting from Chrome 93, Service Woker must contain effective fetch events to control offline requests.  </p>
</li>
<li id="footnote4"><p><strong>SSR</strong>: <strong>S</strong>erver <strong>S</strong>ide <strong>R</strong>endering, </p>
</li>
<li id="footnote5"><p><strong>SEO</strong>: <strong>S</strong>earch <strong>E</strong>ngine <strong>O</strong>ptimization. For details, please see <a href="https://mrhope.site/code/site/html/definition/seo/" target="_blank" rel="noopener noreferrer">SEO Introduction</a> </p>
</li>
<li id="footnote6"><p><strong>SPA</strong>: <strong>S</strong>ingle <strong>P</strong>age <strong>A</strong>pplication, most of them only have the homepage, and use history mode to handle routing instead of actually navigating between pages. </p>
</li>
<li id="footnote7"><p><strong>Manifest File</strong></p>
<p>The manifest file uses the JSON format and is responsible for declaring various information of the PWA, such as name, description, icon, and shortcut actions.</p>
<p>In order for your site to be registered as a PWA, you need to meet the basic specifications of the manifest to make the browser consider the site as an installable PWA and allow users to install it.</p>
<div><p>Info</p>
<p>For Manifest standards and specifications, please see <a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest</a></p>
</div>
 </li>
</ol>
</section>
]]></content>
  </entry>
  <entry>
    <title type="html">主页</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/zh/</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/zh/"/>
    <updated>2022-01-27T15:31:19.985Z</updated>
    <content type="html"><![CDATA[<p>渐进式网页应用 (Progressive Web App) 支持。</p>
<h2 id="使用插件" tabindex="-1"> 使用插件</h2>
<h3 id="安装" tabindex="-1"> 安装</h3>
<CodeGroup>
<CodeGroupItem title="yarn">
<div><pre><code><span>yarn</span> <span>add</span> -D vuepress-plugin-pwa2@next
</code></pre><div><span>1</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="npm">
<div><pre><code><span>npm</span> i -D vuepress-plugin-pwa2@next
</code></pre><div><span>1</span><br></div></div></CodeGroupItem>
</CodeGroup>
<h3 id="使用" tabindex="-1"> 使用</h3>
<CodeGroup>
<CodeGroupItem title="ts">
<div><pre><code><span>// .vuepress/config.ts</span>
<span>import</span> <span>{</span> pwa <span>}</span> <span>from</span> <span>"vuepress-plugin-pwa2"</span><span>;</span>

<span>export</span> <span>default</span> <span>{</span>
  plugins<span>:</span> <span>[</span>
    <span>pwa</span><span>(</span><span>{</span>
      <span>// 你的选项</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div></CodeGroupItem>
<CodeGroupItem title="js">
<div><pre><code><span>// .vuepress/config.js</span>
<span>const</span> <span>{</span> pwa <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vuepress-plugin-pwa2"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>pwa</span><span>(</span><span>{</span>
      <span>// 你的选项</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br></div></div></CodeGroupItem>
</CodeGroup>
]]></content>
  </entry>
  <entry>
    <title type="html">配置</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/zh/config.html</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/zh/config.html"/>
    <updated>2022-01-27T15:31:19.986Z</updated>
    <content type="html"><![CDATA[<h2 id="showinstall" tabindex="-1"> showInstall</h2>
<ul>
<li>类型: <code>boolean</code></li>
<li>默认值: <code>true</code></li>
</ul>
<p>是否在 Service Worker 首次成功注册时显示 PWA 安装按钮</p>
<h2 id="manifest" tabindex="-1"> manifest</h2>
<ul>
<li>类型: <code>ManifestOption</code></li>
<li>必填: 否</li>
</ul>
<p>填充一个将被解析为 manifest.webmanifest 的对象。</p>
<div><p>提示</p>
<p>如果未设置某些选项，它们会回退到插件预设值。</p>
<ul>
<li>
<p>name: <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></p>
</li>
<li>
<p>short_name: <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code></p>
</li>
<li>
<p>description: <code>siteConfig.description</code> || <code>themeConfig.description</code> || <code>'A site built with vuepress-theme-hope'</code></p>
</li>
<li>
<p>lang: <code>siteConfig.locales['/'].lang</code> || <code>themeConfig.locales['/'].lang</code> || <code>&quot;en-US&quot;</code></p>
</li>
<li>
<p>start_url: <code>context.base</code></p>
</li>
<li>
<p>scope: <code>context.base</code></p>
</li>
<li>
<p>display: <code>&quot;standalone&quot;</code></p>
</li>
<li>
<p>theme_color: <code>&quot;#46bd87&quot;</code></p>
</li>
<li>
<p>background_color: <code>'#ffffff'</code></p>
</li>
<li>
<p>orientation: <code>'portrait-primary'</code></p>
</li>
<li>
<p>prefer_related_applications: <code>false</code></p>
</li>
</ul>
</div>
<div><p>更多</p>
<p>更多内容，请详见 <a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest</a></p>
</div>
<h2 id="favicon" tabindex="-1"> favicon</h2>
<ul>
<li>类型: <code>string</code></li>
<li>必填: 否</li>
</ul>
<p><code>favicon.ico</code> 地址，填入绝对路径。</p>
<div><p>注意</p>
<p>我们建议你为你的站点生成 favicon</p>
</div>
<h2 id="themecolor" tabindex="-1"> themeColor</h2>
<ul>
<li>类型: <code>string</code></li>
<li>默认值: <code>&quot;#46bd87&quot;</code></li>
</ul>
<p>主题色，默认为主题绿</p>
<h2 id="maxsize" tabindex="-1"> maxSize</h2>
<ul>
<li>类型: <code>number</code></li>
<li>默认值: <code>2048</code></li>
</ul>
<p>允许缓存的最大大小 (以 KB 为单位)</p>
<div><p>注意</p>
<p>此选项具有最高优先级，任何超过此值的文件都会被排除。</p>
<p>所以你如果生成了很大的 HTML 或 JS 文件，请考虑调高此值，否则你的 PWA 可能无法在离线模式下正常运行。</p>
</div>
<h2 id="cachehtml" tabindex="-1"> cacheHTML</h2>
<ul>
<li>类型: <code>boolean</code></li>
<li>默认值: <code>true</code></li>
</ul>
<p>是否缓存主页和 404 错误页之外的 HTML 文件</p>
<h2 id="cachepic" tabindex="-1"> cachePic</h2>
<ul>
<li>类型: <code>boolean</code></li>
<li>默认值: <code>false</code></li>
</ul>
<p>是否缓存图片。</p>
<h2 id="maxpicsize" tabindex="-1"> maxPicSize</h2>
<ul>
<li>类型: <code>number</code></li>
<li>默认值: <code>1024</code></li>
</ul>
<p>图片允许缓存的最大大小 (以 KB 为单位)</p>
<div><p>提示</p>
<p>该选项不能大于 <code>maxSize</code>。</p>
</div>
<h2 id="apple" tabindex="-1"> apple</h2>
<p>针对苹果的特殊设置</p>
<blockquote>
<p>如果你不想进行精细的设置，可以忽略它；如果你不想兼容 Apple 上的 Safari，请设置为 <code>false</code>。</p>
</blockquote>
<h3 id="apple-icon" tabindex="-1"> apple.icon</h3>
<ul>
<li>类型: <code>string</code></li>
<li>必填: 否</li>
</ul>
<p>填入苹果使用的图标地址，推荐 152×152 大小</p>
<h3 id="apple-statusbarcolor" tabindex="-1"> apple.statusBarColor</h3>
<ul>
<li>类型: <code>&quot;black&quot; | &quot;white&quot;</code></li>
<li>默认: <code>&quot;black&quot;</code></li>
</ul>
<p>苹果的状态栏颜色</p>
<h3 id="apple-maskicon" tabindex="-1"> apple.maskIcon</h3>
<ul>
<li>类型: <code>string</code></li>
<li>必填: 否</li>
</ul>
<p>Safari 图标</p>
<h2 id="mstile" tabindex="-1"> msTile</h2>
<p>针对微软磁贴的特殊设置</p>
<blockquote>
<p>如果你不想进行精细的设置，可以忽略它；如果你不想兼容 windows，请设置为 <code>false</code>。</p>
</blockquote>
<h3 id="mstile-image" tabindex="-1"> msTile.image</h3>
<ul>
<li>类型: <code>string</code></li>
<li>必填: 否</li>
</ul>
<p>磁贴图标</p>
<h3 id="mstile-color" tabindex="-1"> msTile.color</h3>
<ul>
<li>类型: <code>string</code></li>
<li>默认值: <code>themeColor</code></li>
</ul>
<p>磁贴颜色，缺省会自动回退到主题色。</p>
<h2 id="popupcomponent" tabindex="-1"> popupComponent</h2>
<ul>
<li>类型: <code>string</code></li>
<li>默认值: <code>'SWUpdatePopup'</code></li>
</ul>
<p>可填入自定义的弹窗组件路径。</p>
<h2 id="generateswconfig" tabindex="-1"> generateSwConfig</h2>
<p>传递给 <code>workbox-build</code> 的选项，具体详情，请见 <a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW" target="_blank" rel="noopener noreferrer">Workbox 文档</a></p>
<h2 id="locales" tabindex="-1"> locales</h2>
<div><pre><code><span>interface</span> <span>PWALocaleData</span> <span>{</span>
  <span>/**
   * 安装按钮文字
   */</span>
  install<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * iOS 安装文字
   */</span>
  iOSInstall<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 取消按钮文字
   */</span>
  cancel<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 关闭按钮文字
   */</span>
  close<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 上一张图片文字
   */</span>
  prevImage<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 下一张图片文字
   */</span>
  nextImage<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 安装解释
   */</span>
  explain<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 描述标签文字
   */</span>
  desc<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 特性标签文字
   */</span>
  feature<span>:</span> <span>string</span><span>;</span>

  <span>/**
   * 更新内容标签文字
   */</span>
  update<span>:</span> <span>string</span><span>;</span>
<span>}</span>
</code></pre><div><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br></div></div><p>国际化配置。</p>
]]></content>
  </entry>
  <entry>
    <title type="html">指南</title>
    <id>https://vuepress-theme-hope.github.io/v2/pwa/zh/guide.html</id>
    <link href="https://vuepress-theme-hope.github.io/v2/pwa/zh/guide.html"/>
    <updated>2022-01-27T15:31:19.993Z</updated>
    <summary type="html"><![CDATA[<p>插件为 VuePress 带来了增强的 PWA 支持[^pwa-intro]。</p>
]]></summary>
    <content type="html"><![CDATA[<p>插件为 VuePress 带来了增强的 PWA 支持<sup></sup>。</p>

<h2 id="内容缓存和更新" tabindex="-1"> 内容缓存和更新</h2>
<p>Service Worker <sup></sup> (简称 SW) 主要用于获取并托管网站内容。</p>
<p>本插件会自动通过 <code>workbox-build</code> 注册 Service Woker。</p>
<p>为了更好地控制 Service Worker 可以预缓存的内容，插件提供了下列设置。</p>
<p>如果你是一个高级用户，你也可以直接设置 <code>generateSwConfig</code> 来将选项传递给 <code>workbox-build</code>。</p>
<h3 id="默认缓存" tabindex="-1"> 默认缓存</h3>
<p>默认情况下插件会预缓存所有与网站相关的文件: <code>**/*.{html,js,css,svg}</code></p>
<p>同时插件还会缓存字体文件: <code>**/*.{woff,woff2,eot,ttf,otf}</code>。</p>
<h3 id="缓存控制" tabindex="-1"> 缓存控制</h3>
<p>基于可安装性<sup></sup>的要求，插件提供了缓存控制的相关选项。</p>
<h4 id="图片缓存" tabindex="-1"> 图片缓存</h4>
<p>你可以通过设置 <code>cachePic</code> 选项为 <code>true</code> 来缓存站点图片。</p>
<p>如果您的站点体积不大，且配图大多为关键性说明，希望可以在离线模式下显示，建议将此项设置为 <code>true</code>。</p>
<div><p>图片识别</p>
<p>我们通过文件后缀名识别图片，任何以 <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code> , <code>.gif</code>, <code>.bmp</code>, <code>.webp</code> 结尾的文件都会视为图片。</p>
</div>
<h4 id="html-缓存" tabindex="-1"> HTML 缓存</h4>
<p>当你网站体积过大时，你可以通过设置 <code>cacheHTML</code> 为 <code>false</code> 来仅缓存除主页和 404 错误页。</p>
<div><p>为什么可以移除</p>
<p>虽然说 VuePress 为所有的页面通过 SSR<sup></sup> 生成了 HTML 文件，但是这些文件主要用于 SEO<sup></sup>，并能够让你在后端不做 SPA<sup></sup> 配置的情况下能够直接访问任何链接。</p>
<p>VuePress 本质上是一个 SPA。这意味着你只需要缓存主页并从主页进入即可正常访问所有页面。</p>
<p>当你站点页面数量或内容很多，包含 HTML 文件后体积过大时，你可以考虑将此项设置为 <code>false</code>，这样可以缩减大约 40% 的体积。缺点是用户在离线环境下只能通过主页进入再自行导航到对应页面。直接访问某个链接会出现网页错误的提示。</p>
</div>
<h4 id="大小控制" tabindex="-1"> 大小控制</h4>
<p>为了防止在预缓存列表中包含大文件，任何大于 2MB 的文件或大于 1MB 的图片都将被删除。</p>
<p>你可以通过 <code>maxSize</code> 选项自定义缓存的最大文件大小 (单位 KB)，或通过 <code>maxPicSize</code> 来更改图片的大小限制 (单位: KB)。</p>
<h3 id="更新弹窗" tabindex="-1"> 更新弹窗</h3>
<p>成功下载新内容后，我们将提供更新弹出窗口。</p>
<div><p>自定义弹窗</p>
<p>如果你对默认的弹窗不满意，你可以自行编写组件更换。你需要全局注册自己的弹窗组件，并将组件的名称传递给 <code>popupComponent</code> 选项。</p>
</div>
<h2 id="清单文件生成" tabindex="-1"> 清单文件生成</h2>
<p>为了保证 PWA 的可安装性，网站需要生成清单文件，并通过 <code>link</code> 声明有效的 manifest 清单文件地址<sup></sup>。</p>
<p>插件会在输出目录自动为你生成 Manifest 文件 <code>manifest.webmanifest</code>，同时还会添加清单地址声明到每一个 HTML 的 <code>&lt;head&gt;</code> 中。</p>
<p>如果你在 <code>.vuepress/public</code> 中已有一个 <code>manifest.webmanifest</code> 或 <code>manifest.json</code>，该插件将读取它并合并到最终 manifest 中。</p>
<h3 id="自动生成" tabindex="-1"> 自动生成</h3>
<p>插件会尽可能的通过 VuePress 插件接口的信息，为 manifest 的大部分设置项设置 fallback，这意味着即使你无需设置 manifest 的大多数内容。</p>
<p>如果未设置下列选项，它们会按照顺序依次尝试回退到以下预设值。</p>
<p>| 选项                        | 默认值                                                                                                 |
| --------------------------- | ------------------------------------------------------------------------------------------------------ | --- | --------- |
| name                        | <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code>                                              |
| short_name                  | <code>siteConfig.title</code> || <code>themeConfig.title</code> || <code>'Site'</code>                                              |
| description                 | <code>siteConfig.description</code> || <code>themeConfig.description</code> || <code>'A site built with vuepress-theme-hope'</code> |
| lang                        | <code>siteConfig.locales['/'].lang</code> || <code>themeConfig.locales['/'].lang</code> || <code>&quot;en-US&quot;</code>                     | \  | <code>&quot;en-US&quot;</code> |
| start_url                   | <code>context.base</code>                                                                                         |
| scope                       | <code>context.base</code>                                                                                         |
| display                     | <code>&quot;standalone&quot;</code>                                                                                         |
| theme_color                 | <code>&quot;#46bd87&quot;</code>                                                                                            |
| background_color            | <code>'#ffffff'</code>                                                                                            |
| orientation                 | <code>'portrait-primary'</code>                                                                                   |
| prefer_related_applications | <code>false</code>                                                                                                |</p>
<p>完整的配置项详见 <a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/blob/v1/packages/pwa/src/types/manifest.d.ts" target="_blank" rel="noopener noreferrer">Manifest 类型定义文件</a></p>
<h3 id="手动配置" tabindex="-1"> 手动配置</h3>
<p>你可以在 <code>manifest</code> 选项中手动指定 manifest 的各项内容。</p>
<div><p>优先级</p>
<p><code>manifest</code> 选项的设置具有最高的优先级，之后是 <code>public</code> 文件夹下可能存在的 manifest 文件。</p>
</div>
<p><strong>你至少应该通过 <code>manifest.icons</code> 或 PWA 插件中的其他选项设置一个有效的图标。</strong> 因为这是我们没法默认生成的。</p>
<div><p>注意</p>
<p>可安装性<sup></sup>规范要求 manifest 中至少声明一个有效的图标。</p>
<p>所以如果你不配置 <code>manifest.icons</code>，访问者只能享受到 Service Worker 缓存带来的离线可访问性，而并不能作为 PWA 进行安装。</p>
<p>另外插件并不会处理 manifest 中的任何内容，而是原样输出它们。这意味着如果打算你部署到某个子目录，你则应自行添加 <code>base</code> 到 manifest 中的相应 URL。</p>
</div>
<h2 id="其他选项" tabindex="-1"> 其他选项</h2>
<p>插件还提供了其他 PWA 相关选项，比如微软磁贴图标与颜色设置，苹果图标等。</p>
<p>你可以酌情根据需要设置它们。详细的选项请见 <a href="/zh/config.html">配置页</a>。</p>
<h2 id="相关阅读" tabindex="-1"> 相关阅读</h2>
<p>更多内容，请详见:</p>
<ul>
<li><a href="https://web.dev/progressive-web-apps/" target="_blank" rel="noopener noreferrer">Google PWA</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">MDN PWA</a></li>
<li><a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest 规范</a></li>
</ul>
<hr>
<section>
<ol>
<li id="footnote1"><p><strong>PWA 介绍</strong></p>
<p>PWA 全称 Progressive Web app，即渐进式网络应用程序，标准由 W3C 规定。</p>
<p>它允许网站通过支持该特性的浏览器将网站作为 App 安装在对应平台上。 </p>
</li>
<li id="footnote2"><p><strong>Service Worker 简要介绍</strong></p>
<ol>
<li>
<p>Service Worker 会在注册过程中获取注册在其中的所有文件并缓存它们。</p>
</li>
<li>
<p>注册成功后，Service Worker 激活，并开始代理并控制你的全部请求。</p>
</li>
<li>
<p>每当你想要通过浏览器发起访问请求后，Service Worker 将会查看其是否存在与自身缓存列表中，若存在则直接返回缓存好的结果，否则调用自身的 fetch 方法进行获取。你可以通过自定义 fetch 方法，来完全控制网页内资源获取请求的结果，比如在离线时提供一个 fallback 的网页。</p>
</li>
<li>
<p>每次用户重新打开网站时，Service Worker 会向自身注册时的地址发出校验命令，如果检测到新版本的 Service Woker，则会更新自身，并开始缓存注册在新 Service Worker 中的资源列表。成功获取内容更新后，Service Worker 将会触发 <code>update</code> 事件。可以通过此事件提示用户，比如将在右下角显示一个弹出窗口，提示用户新内容可用并允许用户触发更新。</p>
</li>
</ol>
 </li>
<li id="footnote3"><p><strong>可安装性</strong></p>
<p>想要让网站可以注册为 PWA，网站需要自行成功注册有效的 Service Worker，同时添加合法的 manifest 清单文件并在网站中声明它。</p>
<p>各平台或浏览器对 Service Worker 缓存的大小有要求，当 Service Worker 缓存的文件体积过大后，该网站将会被标记为不可安装。对于 Safari 这个阈值是 50 MB，少数浏览器会设置更少或更多的值 (30MB, 70MB, 80MB)，最大的 Chrome 也将阈值标识在 100 MB。</p>
<p>另外，清单文件应至少包含 <code>name</code>(或 <code>short_name</code>) <code>icons</code> <code>start_url</code>。</p>
<p>从 Chrome 93 起 Service Woker 必须含有有效的控制离线请求的 fetch 事件  </p>
</li>
<li id="footnote4"><p><strong>SSR</strong>: <strong>S</strong>erver <strong>S</strong>ide <strong>R</strong>endering，服务端渲染 </p>
</li>
<li id="footnote5"><p><strong>SEO</strong>: <strong>S</strong>earch <strong>E</strong>ngine <strong>O</strong>ptimization，搜索引擎增强，</p>
<p>详见 <a href="https://mrhope.site/code/website/html/definition/seo/" target="_blank" rel="noopener noreferrer">SEO 介绍</a> </p>
</li>
<li id="footnote6"><p><strong>SPA</strong>: <strong>S</strong>ingle <strong>P</strong>age <strong>A</strong>pplication, 单页应用</p>
<p>大多只有主页，并使用 history mode 处理路由，而不是真的在页面之间导航。 </p>
</li>
<li id="footnote7"><p><strong>清单文件</strong></p>
<p>清单文件使用 JSON 格式，负责声明 PWA 各项信息，如名称、描述、图标、快捷动作等。</p>
<p>为了使你的站点能够被注册为 PWA，你需要满足 manifest 基本的规范，才能使浏览器认为该网站为一个可安装的 PWA 并允许用户安装它。</p>
<div><p>相关信息</p>
<p>Manifest 的标准与规范，请详见 <a href="https://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">W3C Manifest</a></p>
</div>
 </li>
</ol>
</section>
]]></content>
  </entry>
</feed>